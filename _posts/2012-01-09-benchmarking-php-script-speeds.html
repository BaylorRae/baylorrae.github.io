---
layout: post
title: Benchmarking PHP Script Speeds
date: 2012-01-09 08:00:12.000000000 -06:00
categories:
- PHP
- Projects
- Snippets
tags:
- benchmarking
- php
- script speed
meta:
  dsq_thread_id: '835245658'
---
<p>I recently learned about <a href="http://jsperf.com/">jsperf.com</a> and I've really enjoyed looking at the speed results of different pieces of code. However, I couldn't find any sites that did the same for PHP and I've really wanted to test different ideas that I've had.</p>
<h2>How it should work</h2>
<p>There were a couple of things that I wanted to make sure were done. The first was to make it easy to define tests. I looked at <a href="http://www.phpbench.com/">phpbench.com</a> and liked how he stored each test into a function. The second was that I wanted to create an loop that would run for a specified amount of time.</p>
<h2>The syntax</h2>
<p>I wanted a way to write write tests, give each one a name and set the allowed time to run. If you've ever used <a href="http://jsperf.com/">jsperf.com</a> this should be very similar.</p>
<p>[gist id="3559529" file="example.php"]<br />
<script src="https://gist.github.com/BaylorRae/3559529.js?file=example.php"></script></p>
<h2>The Benchmark Class</h2>
<p>[gist id="3559529" file="benchmark.php"]<br />
<script src="https://gist.github.com/BaylorRae/3559529.js?file=benchmark.php"></script></p>
<p>There isn't a whole lot to the code. When <code>Benchmark::run_test</code> is called it get's the time it was called, turns on output buffering to prevent anything being displayed on the page and freezing the browser, and then loops through the test and counts the number of times it ran the function.</p>
<p>The <code>Benchmark::results</code> method formats the results to display the number of times it ran and for how long it was allowed to run.</p>
<h2>Things to note</h2>
<p>I haven't put this through a lot of tests. At this point I've really only intended to use it to look at a couple of different concepts. I'm not sure how it can handle a large amount of tests and wouldn't suggest doing a lot of tests without adding a <a href="http://php.net/sleep">sleep()</a> call between a couple of them.</p>
<p>I also wanted to create an online version that could act like <a href="http://jsperf.com/">jsperf.com</a> for PHP. My biggest fear is the safety of my server and I'm not sure what needs to be done to secure it. If anyone has an idea on what can be done to prevent anything dangerous I'd really appreciate it.</p>
