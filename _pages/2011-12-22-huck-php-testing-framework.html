---
layout: page
title: Huck - PHP Testing Framework
date: 2011-12-22 00:45:50.000000000 -06:00
type: page
published: true
status: publish
categories: []
tags: []
meta:
  _edit_last: '1'
  _wp_page_template: project.php
  dsq_thread_id: '834069655'
author:
  login: mr. pig
  email: baylorrae@gmail.com
  display_name: Baylor Rae'
  first_name: Baylor
  last_name: Rae'
---
<p><strong>A PHP Testing Framework</strong></p>
<p>[github repo=&quot;PHP-Huck&quot;]</p>
<pre><code class="php">&lt;?php
describe(&#39;Huck Fin&#39;, function() {

   it(&#39;should be Huck&#39;, function() {
      expect(&#39;Huck&#39;)-&gt;toBe(&#39;Huck&#39;); 
   });

   it(&#39;should not be Huck&#39;, function() {
      expect(&#39;Tom&#39;)-&gt;not-&gt;toBe(&#39;Huck&#39;); 
   });

});
?&gt;
</code></pre>
<p>Huck is a Behavior Driven Development (BDD) framework based on <a href="https://github.com/pivotal/jasmine">Jasmine for JS</a>. It is designed with a simple syntax to give it a fast learning curve.</p>
<h2>Getting Started</h2>
<p>Huck runs in the browser so you don&#39;t have to load terminal. Just upload it to your server, create the specs and load <code>index.php</code>. Huck will automatically find all files in <code>specs/*_spec.php</code> and run them.</p>
<h2>Why did I write this?</h2>
<p>I know there are a bunch of test suites for PHP, but I wanted to build my own for the experience. Plus, I didn&#39;t like the syntax or result format other suites had.</p>
<blockquote cite="Martin Fowler">
<p>Whenever you are tempted to type something into a print statement or a debugger expression, write it as a test instead.</p>
<p>    <span class="author">Martin Fowler</span>
</p></blockquote>
<h2>Writing a Spec</h2>
<pre><code class="php">&lt;?php
// specs/first_spec.php
describe(&#39;This is my Test Suite&#39;, function() {

});
?&gt;
</code></pre>
<p>All specs need to be placed inside of the <code>./specs</code> directory and the filename must end in <code>_spec.php</code> for Huck to find it. Huck will autoload each file and run the tests so you don&#39;t have to worry about that part.</p>
<pre><code class="php">&lt;?php
require &#39;/path/to/User.php&#39;;

// specs/user_spec.php
describe(&#39;User Class Functionality&#39;, function() {

    it(&#39;should authenticate user&#39;, function() {
       expect(User::authenticate(&#39;BaylorRae&#39;, &#39;pass&#39;))-&gt;toBeInstanceOf(&#39;User&#39;); 
    });

    it(&#39;should not authenticate user&#39;, function() {
       expect(User::authenticate(&#39;BaylorRae&#39;, &#39;wrong password&#39;))-&gt;not-&gt;toBeInstanceOf(&#39;User&#39;); 
    });

});
?&gt;
</code></pre>
<p>Once you have described your spec you can add your tests. The syntax is designed so you can read each line and understand what&#39;s going on.</p>
<p>Notice that in the second test I was able to make sure that it did <strong>not</strong> return an instance of <code>User</code>. Normally the <code>User::authenticate()</code> method would return false and the test would be <code>expect($x)-&gt;toBeFalsy()</code> but I wanted to show how to invert the test.</p>
<h2>Matchers and how to write them</h2>
<p>Huck comes with a number of matchers that should be more than enough in most cases. The full list is on <a href="https://github.com/BaylorRae/PHP-Huck#readme">GitHub in the Readme</a>.</p>
<h3>Here are a couple of my favorites</h3>
<blockquote>
<p><code>expect($x)-&gt;toMatch($pattern)</code> compares <code>$x</code> to regular expression <code>$pattern</code></p>
<p><code>expect($x)-&gt;toBeArray()</code> makes sure <code>$x</code> is an array</p>
<p><code>expect($x)-&gt;toBeTruthy()</code> checks to see if <code>$x === true</code></p>
</blockquote>
<h3>The Syntax</h3>
<pre><code class="php">&lt;?php

/**
 * Checks to match length of an array
 *
 * @param $actual the value passed into expect()
 * @param $expected the value passed into -&gt;toBeLength()
 * @author Baylor Rae&#39;
 */
Huck::addMatcher(&#39;toBeLength&#39;, function($actual, $expected) {
    if( !is_array($actual) &amp;&amp; !is_array($expected) )
        return false;

    return count($actual) === count($expected);
});

?&gt;
</code></pre>
<p>Let me know what you think and/or what you would like to see added to framework. This is the first testing framework that I&#39;ve written and I&#39;m not completely sure everything is perfect yet. If you have any suggestions please let me know.</p>
<p class="center">
  <a class="button" href="https://github.com/BaylorRae/PHP-Huck">View the project on GitHub</a></p>
